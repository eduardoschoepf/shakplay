"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[117],{6318:function(e,t,a){a.d(t,{AuthProvider:function(){return h},a:function(){return p}});var r=a(7437),o=a(2265),n=a(2503),i=a(257);let s={id:1,name:"Demo User",email:"demo@shakplay.com",avatar:"/placeholder.svg?height=100&width=100",role:"player",sport:"Tennis",skill_level:5,xp:1250,next_level_xp:1500,phone:"+1 (555) 123-4567",location:"New York, NY",bio:"Tennis enthusiast and weekend warrior",achievements:["First Match","Social Player","Rising Star"],preferences:{notifications:!0,privacy:"public",language:"en"},subscription:{type:"premium",expires_at:"2024-12-31"},stats:{matches_played:25,matches_won:18,total_playtime:1800,favorite_club:"Elite Tennis Club"},created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-15T00:00:00Z",email_verified:!0,last_login:"2024-01-15T10:30:00Z"},l=()=>{let e=i.env.NEXT_PUBLIC_XANO_WORKSPACE_URL;return!e||e.includes("your-workspace-id")||e.includes("x8ki-letl-twmt")},c={login:async e=>(await new Promise(e=>setTimeout(e,1e3)),e.email&&e.password)?{data:{authToken:"mock_jwt_token_"+Date.now(),user:{id:s.id,name:s.name,email:s.email,avatar:s.avatar,skill_level:s.skill_level,xp:s.xp,created_at:s.created_at,updated_at:s.updated_at}}}:{error:"Invalid credentials. Try demo@shakplay.com / demo123"},async register(e){await new Promise(e=>setTimeout(e,1e3));let t={...s,id:Date.now(),name:e.name,email:e.email,sport:e.sport||"Tennis",skill_level:e.skill_level||1,phone:e.phone,date_of_birth:e.date_of_birth,xp:0,next_level_xp:100,stats:{matches_played:0,matches_won:0,total_playtime:0},achievements:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return{data:{authToken:"mock_jwt_token_"+Date.now(),user:{id:t.id,name:t.name,email:t.email,avatar:t.avatar,skill_level:t.skill_level,xp:t.xp,created_at:t.created_at,updated_at:t.updated_at}}}},getProfile:async()=>(await new Promise(e=>setTimeout(e,500)),{data:s}),updateProfile:async e=>(await new Promise(e=>setTimeout(e,500)),{data:{...s,...e,updated_at:new Date().toISOString()}}),logout:async()=>(await new Promise(e=>setTimeout(e,500)),{data:{success:!0}})},u={async login(e){if(l())return console.warn("Using mock authentication - configure NEXT_PUBLIC_XANO_WORKSPACE_URL for real API"),c.login(e);try{return await n.W.post("/auth/login",e)}catch(e){return console.error("Login API error:",e),{error:"Failed to connect to authentication service"}}},async register(e){if(l())return console.warn("Using mock authentication - configure NEXT_PUBLIC_XANO_WORKSPACE_URL for real API"),c.register(e);try{return await n.W.post("/auth/signup",e)}catch(e){return console.error("Register API error:",e),{error:"Failed to connect to authentication service"}}},async getProfile(){if(l())return c.getProfile();try{return await n.W.get("/auth/me")}catch(e){return console.error("Get profile API error:",e),{error:"Failed to fetch profile"}}},async updateProfile(e,t){if(l())return c.updateProfile(t);try{return await n.W.patch("/users/".concat(e),t)}catch(e){return console.error("Update profile API error:",e),{error:"Failed to update profile"}}},async logout(){if(l())return c.logout();try{let e=await n.W.post("/auth/logout");return n.W.clearAuthToken(),e}catch(e){return console.error("Logout API error:",e),{error:"Failed to logout"}}}},d=(0,o.createContext)(void 0);function h(e){let{children:t}=e,[a,n]=(0,o.useState)(null),[i,s]=(0,o.useState)(!0);(0,o.useEffect)(()=>{l()},[]);let l=async()=>{try{if(localStorage.getItem("auth_token")){let e=await u.getProfile();e.data?n(e.data):localStorage.removeItem("auth_token")}}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("auth_token")}finally{s(!1)}},c=async e=>{s(!0);try{let t=await u.login(e);if(!t.data)return console.error("Login failed:",t.error),!1;{let{user:e,authToken:a}=t.data;localStorage.setItem("auth_token",a);let r=await u.getProfile();return r.data?n(r.data):n({id:e.id,name:e.name,email:e.email,avatar:e.avatar,role:"player",sport:"Tennis",skill_level:e.skill_level||1,xp:e.xp||0,next_level_xp:100,achievements:[],preferences:{notifications:!0,privacy:"public",language:"en"},subscription:{type:"free"},stats:{matches_played:0,matches_won:0,total_playtime:0},created_at:e.created_at,updated_at:e.updated_at,email_verified:!0}),!0}}catch(e){return console.error("Login error:",e),!1}finally{s(!1)}},h=async e=>{s(!0);try{let t=await u.register(e);if(!t.data)return console.error("Registration failed:"),!1;{let{user:a,authToken:r}=t.data;localStorage.setItem("auth_token",r);let o=await u.getProfile();return o.data?n(o.data):n({id:a.id,name:a.name,email:a.email,avatar:a.avatar,role:"player",sport:e.sport||"Tennis",skill_level:e.skill_level||1,xp:0,next_level_xp:100,achievements:[],preferences:{notifications:!0,privacy:"public",language:"en"},subscription:{type:"free"},stats:{matches_played:0,matches_won:0,total_playtime:0},created_at:a.created_at,updated_at:a.updated_at,email_verified:!1}),!0}}catch(e){return console.error("Registration error:",e),!1}finally{s(!1)}},p=async()=>{s(!0);try{await u.logout()}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("auth_token"),n(null),s(!1)}},m=async e=>{if(!a)return!1;try{let t=await u.updateProfile(a.id,e);if(t.data)return n(t.data),!0;return console.error("Profile update failed:"),!1}catch(e){return console.error("Profile update error:",e),!1}},_=async()=>{if(a)try{let e=await u.getProfile();e.data&&n(e.data)}catch(e){console.error("Refresh user error:",e)}};return(0,r.jsx)(d.Provider,{value:{user:a,isAuthenticated:!!a,loading:i,login:c,register:h,logout:p,updateProfile:m,refreshUser:_},children:t})}function p(){let e=(0,o.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4508:function(e,t,a){a.d(t,{cn:function(){return n}});var r=a(1994),o=a(3335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,o.m6)((0,r.W)(t))}},2503:function(e,t,a){a.d(t,{W:function(){return n}});var r=a(257);class o{setAuthToken(e){this.authToken=e,localStorage.setItem("auth_token",e)}clearAuthToken(){this.authToken=null,localStorage.removeItem("auth_token")}isConfigured(){return!!this.baseURL}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isConfigured())return console.warn("Xano not configured - using mock data"),{error:"Xano workspace URL not configured",data:null};let a="".concat(this.baseURL).concat(e),r={...t.headers};t.body instanceof FormData||(r["Content-Type"]="application/json"),this.authToken&&(r.Authorization="Bearer ".concat(this.authToken));try{let e;console.log("Making request to: ".concat(a));let o=await fetch(a,{...t,headers:r,mode:"cors",credentials:"omit"});console.log("Response status: ".concat(o.status));let n=o.headers.get("content-type");if(n&&n.includes("application/json"))e=await o.json();else{let t=await o.text();try{e=JSON.parse(t)}catch(a){e={message:t}}}if(!o.ok){let t=(null==e?void 0:e.message)||(null==e?void 0:e.error)||"HTTP ".concat(o.status,": ").concat(o.statusText);return console.error("API Error:",t),{error:t,status:o.status,data:null}}return{data:e,status:o.status}}catch(t){console.error("Network Error:",t);let e="Network error occurred";return t instanceof TypeError?(t.message.includes("fetch")?e="Unable to connect to server. Please check your internet connection.":t.message.includes("CORS")&&(e="CORS error - please check server configuration"),e="CORS error - please check server configuration"):t instanceof Error&&(e=t.message),{error:e,data:null}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){let a={method:"POST"};return t instanceof FormData?a.body=t:t&&(a.body=JSON.stringify(t)),this.request(e,a)}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e,t){return this.request(e,{method:"DELETE",body:t?JSON.stringify(t):void 0})}async healthCheck(){if(!this.isConfigured())return!1;try{return(await fetch("".concat(this.baseURL,"/health"),{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors",credentials:"omit"})).ok}catch(e){return!1}}isAuthenticated(){return!!this.authToken}getBaseURL(){return this.baseURL}isReady(){return this.isConfigured()}constructor(){this.authToken=null,this.baseURL=r.env.NEXT_PUBLIC_XANO_WORKSPACE_URL||"https://x8ki-letl-twmt.n7.xano.io/api:j_-a28zS",this.authToken=localStorage.getItem("auth_token")}}let n=new o}}]);